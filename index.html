<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator</title>
    <link rel="stylesheet" href="stylesheet.css">
</head>
<body>
    <div class="calculator">
        <div class="text-display-area">
            <p id="display">do math!</p>
        </div>
        <div class="btn-row">
            <button class="number">7</button>
            <button class="number">8</button>
            <button class="number">9</button>
            <button class="operator">+</button>
        </div>
        <div class="btn-row">
            <button class="number">4</button>
            <button class="number">5</button>
            <button class="number">6</button>
            <button class="operator">-</button>
        </div>
        <div class="btn-row">
            <button class="number">1</button>
            <button class="number">2</button>
            <button class="number">3</button>
            <button class="operator">*</button>
        </div>
        <div class="btn-row">
            <button class="number">0</button>
            <button class="number" id="decimal">.</button>
            <button id="backspace">backspace</button>
            <button class="operator">/</button>
        </div>
        <div class="btn-row">
            <button id="equals">=</button>
            <button id="clear">clear</button>
        </div>
    </div>


</body>
<script>
    const display = document.querySelector("#display");

    let operator;
    let displayValue = 0;
    let totalValue = null;
    let holdingArray = [];
    let holding2;

    const operaBtn = document.querySelectorAll(".operator");
    operaBtn.forEach(function(elem){
        elem.addEventListener("click", function(){
            operator = elem.textContent.toLowerCase().trim();
            console.log("operatBtn total value = " + totalValue);
            if(holdingArray.length !== 0){
                operate(holdingArray,holding2,displayValue);

                displayValue = 0;
                holdingArray = [];
                holding2 = null;
            } 
            
            if(totalValue !== null){
                holdingArray.push(Number(totalValue));
                holdingArray.push(operator);
                console.log(operator);
                totalValue = null;
            } else {
                holdingArray.push(Number(displayValue));
                holdingArray.push(operator);
                console.log(operator);
            } 
            operator = null;
            displayValue = null;
        });
    });

    const numBtn = document.querySelectorAll(".number");
    numBtn.forEach(function(elem){
        elem.addEventListener("click", function(){
            totalValue = null;
            
            if(displayValue === 0 || displayValue === null){
                displayValue = elem.textContent.toLowerCase().trim();
                console.log(displayValue);
            } else {
                displayValue += elem.textContent.toLowerCase().trim();
                console.log(displayValue);
            }
            display.textContent = displayValue;
            console.log(displayValue.length)
        });
    });

    const equalBtn = document.querySelectorAll("#equals");
    equalBtn.forEach(function(elem){
        elem.addEventListener("click", function(){
            operate(holdingArray,holding2, displayValue);
            
            displayValue = 0;
            holdingArray = [];
            holding2 = null;
        })
    });

    const backspaceBtn = document.querySelectorAll("#backspace");
    backspaceBtn.forEach(function(elem){
        elem.addEventListener("click", function(){
            if(displayValue.length > 1){
                displayValue = displayValue.slice(0,-1);
            } else {
                displayValue = 0;
            }
            display.textContent = displayValue;
        })
    })

    const clearBtn = document.querySelectorAll("#clear");
    clearBtn.forEach(function(elem){
        elem.addEventListener("click", function(){
            clear();
        })
    });
    
    function add(x,y){
        return x + y;
    }

    function subtract(x,y){
        return x - y;
    }

    function multiply(x,y){
        return x * y;
    }

    function divide(x,y){
        if (x === 0 || y === 0){
            return 0;
        }
        return x / y;
    }

    function clear(){
        displayValue = 0;
        holdingArray = [];
        holding2 = null;
        operator = null;
        totalValue = null;
        display.textContent = "do math!";
    }

    function operate(holdingArray,holding2,displayValue){
        holding2 = Number(displayValue);
        
        if(isNaN(holdingArray[0]) && isNaN(holding2)){
            displayValue = 0;
        } else if(isNaN(holdingArray[0])){
            displayValue = holding2;
        } else if (isNaN(holding2)){
            displayValue = holdingArray[0];
        } else {

            if(holdingArray[1] == "+"){
                displayValue = add(holdingArray[0],holding2)
            } else if (holdingArray[1] == "-"){
                displayValue = subtract(holdingArray[0],holding2)
            } else if (holdingArray[1] == "*"){
                displayValue = multiply(holdingArray[0],holding2)
            } else {
                displayValue = divide(holdingArray[0],holding2)
            }
        }

        if(Number.isInteger(displayValue)){
            display.textContent = displayValue;
        } else {
            display.textContent = displayValue.toFixed(2);
        }
        
        totalValue = displayValue;
    }

</script>
</html>